# Daily Modifications - 2025년 7월 31일

## `calibration_data.py` 수정
- `get_lidar_to_cam_matrix.py`를 실행하여 얻은 LiDAR-to-Camera 변환 행렬(`T_lidar_to_cam`)을 `calibration_data.py`에 직접 NumPy 배열 형태로 저장했습니다. 기존의 동적 계산 로직을 정적 값으로 대체했습니다.

## `visualize_depth_comparison.py` 수정 내역

### 1. 초기 LiDAR 포인트 시각화 및 RGB 오버레이 시도
- LiDAR 포인트의 크기를 키우고, 깊이에 따라 색상을 다르게 표시하는 기능을 추가했습니다.
- 깊이 맵 위에 RGB 이미지를 오버레이하는 기능을 구현했습니다.
- PNG 깊이 맵의 픽셀 값을 미터 단위로 변환하는 (`/256.0`) 방식에 대한 설명을 추가했습니다.

### 2. LiDAR 포인트 시각화 개선 (모든 포인트 동일 크기/색상)
- 사용자 피드백에 따라, 깊이에 따른 색상 변화를 제거하고 모든 투영된 LiDAR 포인트를 동일한 밝은 노란색으로 표시하여 가시성을 높였습니다.
- 마우스 클릭 인식 반경을 확대하여 포인트 선택을 용이하게 했습니다.

### 3. LiDAR 포인트 투영 좌표계 문제 해결
- `camera_lidar_projector.py`를 참고하여, 카메라 좌표계의 X축이 깊이(전방)를 나타낸다는 점을 반영하여 `project_lidar_to_image` 함수의 투영 로직을 수정했습니다.

### 4. `create_depth_maps.py`와의 투영 로직 일치
- `create_depth_maps.py`의 `project_cloud_to_depth_map` 메서드 로직을 `visualize_depth_comparison.py`의 `project_lidar_to_image` 함수에 반영했습니다.
- 특히, LiDAR -> World -> Camera 변환 행렬의 곱셈 순서를 `CAM_EXTRINSIC @ DEFAULT_LIDAR_TO_WORLD_v2`로 정확히 맞추고, 오클루전(Occlusion) 체크 로직을 추가하여 깊이 맵 생성 방식과 동일하게 투영되도록 했습니다.

### 5. LiDAR 포인트 제거 및 깊이 맵 값 표시 개선
- 사용자 요청에 따라 LiDAR 포인트 그리기 기능을 완전히 제거했습니다.
- 깊이 맵만 표시하고, 마우스 오버/클릭 시 표시되는 깊이 값 텍스트의 폰트 크기와 두께를 증가시켰습니다.

### 6. 깊이 맵 픽셀 블록화 시도 및 복원
- 깊이 맵의 각 픽셀을 더 큰 사각형 블록으로 시각화하는 기능을 시도했으나, 사용자 피드백에 따라 원래대로 복원했습니다.

### 7. 깊이 맵 뷰어 기능 개선 (확대/축소 및 이동)
- 깊이 맵의 배경을 흰색으로 처리했습니다.
- 마우스 휠을 이용한 확대/축소(줌) 기능을 추가했습니다.
- 마우스 드래그를 이용한 이미지 이동(패닝) 기능을 구현했습니다.
- 초기 창 크기를 고정하고, 줌/패닝 시 이미지 표시 로직을 개선하여 화면이 작아지거나 드래그가 제대로 되지 않던 문제를 해결했습니다.
